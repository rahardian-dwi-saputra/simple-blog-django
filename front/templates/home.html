{% extends "front_main/base.html" %}
{% block content %}
{% load static %}

{% if posts.count > 0 %}
<h3 class="mt-3 mb-3"> Postingan Terpopuler</h3>
<div class="card-group">
    {% for post in posts %}
    <div class="card">
        {% if post.image %}
        <img src="{{ post.image.url }}" class="card-img-top" alt="image post" height="200">
        {% else %}
        <img src="https://picsum.photos/200/300?random={{ forloop.counter }}" class="card-img-top" alt="Image post" height="200">
        {% endif %}
        <div class="card-body">
            <h5 class="card-title"><a href="/blog/detail/{{ post.slug }}" class="text-decoration-none text-dark">{{ post.title }}</a></h5>
            <p class="card-text">
                <small class="text-muted">Dibaca sebanyak {{ post.view_post }} kali</small>
            </p>
            <p class="card-text">{{ post.excerpt }}</p>
            <a href="{% url 'blog_detail' post.slug %}" class="btn btn-primary">Selengkapnya</a>
        </div>
    </div>
    {% endfor %}
</div>

{% if users.count > 0 %}
<h3 class="mt-3 mb-3"> Penulis Terbanyak</h3>
<div class="row row-cols-1 row-cols-md-3 g-4 mb-3">
    {% for user in users %}
    <div class="col">
        <div class="card text-center p-3">
            {% if user.userprofile__photo %}

            {% else %}
                <img src="{% static 'image/default-profil.png' %}" class="img-thumbnail img-fluid rounded-circle mx-auto d-block" alt="user-foto" width="150" height="150">
            {% endif %}

            <h5 class="card-title mt-1">
                <a href="/blog/user/{{ user.username }}" class="text-decoration-none text-dark">
                    {{ user.get_full_name }}
                </a>
            </h5>
            <p class="card-text">Total Postingan : {{ user.total }}</p>

        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

{% else %}
<h3 class="mt-3 mb-3"> Postingan Tidak Ditemukan</h3>
{% endif %}

{% endblock %}